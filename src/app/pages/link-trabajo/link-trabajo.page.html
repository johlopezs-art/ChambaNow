<app-header-menu title="Detalle del Trabajo"></app-header-menu>

<ion-content class="ion-padding bg-light">

  <!-- Mostramos un spinner si aún está cargando -->
  <div *ngIf="!trabajo" class="ion-text-center ion-padding-top">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Cargando información...</p>
  </div>

  <div *ngIf="trabajo">
    
    <!-- Encabezado con Imagen -->
    <div class="header-job ion-text-center ion-margin-bottom">
      <ion-avatar class="job-avatar">
        <img [src]="trabajo.foto_usuario || 'assets/icon/tech.jpg'" 
             onerror="this.src='https://ionicframework.com/docs/img/demos/avatar.svg'">
      </ion-avatar>
      <h1 class="ion-margin-top">{{ trabajo.titulo }}</h1>
      <p class="subtitle">{{ trabajo.profesion }}</p>
    </div>

    <!-- Tarjeta de Detalles -->
    <ion-card class="detail-card">
      <ion-card-content>
        
        <ion-item lines="none" class="info-item">
          <ion-icon name="cash-outline" slot="start" color="success"></ion-icon>
          <ion-label>
            <h3>Sueldo Ofrecido</h3>
            <p class="salary-text">{{ trabajo.sueldo }}</p>
          </ion-label>
        </ion-item>

        <div class="divider"></div>

        <ion-item lines="none" class="info-item">
          <ion-icon name="person-circle-outline" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Publicado por</h3>
            <p>Usuario #{{ trabajo.usuario_id }}</p>
          </ion-label>
        </ion-item>

        <div class="divider"></div>

        <div class="description-section">
          <h3>Descripción del Trabajo</h3>
          <p>{{ trabajo.especificacion }}</p>
        </div>

      </ion-card-content>
    </ion-card>

    <!-- Botón de Acción -->
    <div class="ion-padding-top">
      <ion-button *ngIf="!yaPostulado" expand="block" size="large" (click)="postular()" shape="round">
        Postular Ahora
        <ion-icon name="briefcase-outline" slot="end"></ion-icon>
      </ion-button>

      <ion-button *ngIf="yaPostulado" expand="block" size="large" color="medium" disabled shape="round">
        Ya has postulado
        <ion-icon name="checkmark-circle-outline" slot="end"></ion-icon>
      </ion-button>
    </div>

  </div>

</ion-content>